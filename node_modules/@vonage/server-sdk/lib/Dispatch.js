"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _index = _interopRequireDefault(require("./index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Dispatch {
  static get PATH() {
    return "/v0.1/dispatch";
  }

  constructor(credentials, options) {
    this.creds = credentials;
    this.options = options; // Used to facilitate testing of the call to the underlying object

    this._vonage = this.options.vonageOverride || _index.default;

    this._vonage.initialize(this.creds.apiKey, this.creds.apiSecret, this.options);
  }

  create(template, workflow, callback) {
    var params = {
      template: template,
      workflow: workflow
    };
    return this.options.api.post(Dispatch.PATH, params, callback, true, {
      "Content-Type": "application/json"
    });
  }

}

var _default = Dispatch;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EaXNwYXRjaC5qcyJdLCJuYW1lcyI6WyJEaXNwYXRjaCIsIlBBVEgiLCJjb25zdHJ1Y3RvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsImNyZWRzIiwiX3ZvbmFnZSIsInZvbmFnZU92ZXJyaWRlIiwidm9uYWdlIiwiaW5pdGlhbGl6ZSIsImFwaUtleSIsImFwaVNlY3JldCIsImNyZWF0ZSIsInRlbXBsYXRlIiwid29ya2Zsb3ciLCJjYWxsYmFjayIsInBhcmFtcyIsImFwaSIsInBvc3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7Ozs7QUFFQSxNQUFNQSxRQUFOLENBQWU7QUFDYixhQUFXQyxJQUFYLEdBQWtCO0FBQ2hCLFdBQU8sZ0JBQVA7QUFDRDs7QUFFREMsRUFBQUEsV0FBVyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUI7QUFDaEMsU0FBS0MsS0FBTCxHQUFhRixXQUFiO0FBQ0EsU0FBS0MsT0FBTCxHQUFlQSxPQUFmLENBRmdDLENBSWhDOztBQUNBLFNBQUtFLE9BQUwsR0FBZSxLQUFLRixPQUFMLENBQWFHLGNBQWIsSUFBK0JDLGNBQTlDOztBQUVBLFNBQUtGLE9BQUwsQ0FBYUcsVUFBYixDQUNFLEtBQUtKLEtBQUwsQ0FBV0ssTUFEYixFQUVFLEtBQUtMLEtBQUwsQ0FBV00sU0FGYixFQUdFLEtBQUtQLE9BSFA7QUFLRDs7QUFFRFEsRUFBQUEsTUFBTSxDQUFDQyxRQUFELEVBQVdDLFFBQVgsRUFBcUJDLFFBQXJCLEVBQStCO0FBQ25DLFFBQU1DLE1BQU0sR0FBRztBQUNiSCxNQUFBQSxRQUFRLEVBQUVBLFFBREc7QUFFYkMsTUFBQUEsUUFBUSxFQUFFQTtBQUZHLEtBQWY7QUFLQSxXQUFPLEtBQUtWLE9BQUwsQ0FBYWEsR0FBYixDQUFpQkMsSUFBakIsQ0FBc0JsQixRQUFRLENBQUNDLElBQS9CLEVBQXFDZSxNQUFyQyxFQUE2Q0QsUUFBN0MsRUFBdUQsSUFBdkQsRUFBNkQ7QUFDbEUsc0JBQWdCO0FBRGtELEtBQTdELENBQVA7QUFHRDs7QUE1Qlk7O2VBK0JBZixRIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB2b25hZ2UgZnJvbSBcIi4vaW5kZXhcIjtcblxuY2xhc3MgRGlzcGF0Y2gge1xuICBzdGF0aWMgZ2V0IFBBVEgoKSB7XG4gICAgcmV0dXJuIFwiL3YwLjEvZGlzcGF0Y2hcIjtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNyZWRlbnRpYWxzLCBvcHRpb25zKSB7XG4gICAgdGhpcy5jcmVkcyA9IGNyZWRlbnRpYWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICAvLyBVc2VkIHRvIGZhY2lsaXRhdGUgdGVzdGluZyBvZiB0aGUgY2FsbCB0byB0aGUgdW5kZXJseWluZyBvYmplY3RcbiAgICB0aGlzLl92b25hZ2UgPSB0aGlzLm9wdGlvbnMudm9uYWdlT3ZlcnJpZGUgfHwgdm9uYWdlO1xuXG4gICAgdGhpcy5fdm9uYWdlLmluaXRpYWxpemUoXG4gICAgICB0aGlzLmNyZWRzLmFwaUtleSxcbiAgICAgIHRoaXMuY3JlZHMuYXBpU2VjcmV0LFxuICAgICAgdGhpcy5vcHRpb25zXG4gICAgKTtcbiAgfVxuXG4gIGNyZWF0ZSh0ZW1wbGF0ZSwgd29ya2Zsb3csIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgICAgd29ya2Zsb3c6IHdvcmtmbG93XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYXBpLnBvc3QoRGlzcGF0Y2guUEFUSCwgcGFyYW1zLCBjYWxsYmFjaywgdHJ1ZSwge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXNwYXRjaDtcbiJdfQ==